---
layout: post
title: Trinket Pro RGB LED Race Gate Controller
id: trinket-pro-rgb-led-micro-quadrotor-race-gate
imgurId: NHmCcdx
videoUrl: https://www.youtube.com/embed/oqDBVKWO1fo
excerpt: RGB LED race gate for micro quadrotors, built with a Trinket Pro, 60 NeoPixel strip, PEX pipe, and FastLED.
categories: products
redirect_from:
  - /26
---

<div class="row">
  <a href="https://i.imgur.com/WNybN7b.mp4" target="_blank"><img src="https://i.imgur.com/V9kHfCS.gif" class="col-sm-4 col-xs-12" /></a>
  <a href="https://i.imgur.com/M060Hxu.jpg" target="_blank"><img src="https://i.imgur.com/M060Hxu.jpg" class="col-sm-4 col-xs-12" /></a>
  <a href="https://i.imgur.com/HSkjbnz.jpg" target="_blank"><img src="https://i.imgur.com/HSkjbnz.jpg" class="col-sm-4 col-xs-12" /></a>
  <a href="https://i.imgur.com/sMUO99b.jpg" target="_blank"><img src="https://i.imgur.com/sMUO99b.jpg" class="col-sm-4 col-xs-12" /></a>
  <a href="https://i.imgur.com/JWSIr2c.jpg" target="_blank"><img src="https://i.imgur.com/JWSIr2c.jpg" class="col-sm-4 col-xs-12" /></a>
  <a href="https://i.imgur.com/9aP8yPQ.jpg" target="_blank"><img src="https://i.imgur.com/9aP8yPQ.jpg" class="col-sm-4 col-xs-12" /></a>
  <a href="https://i.imgur.com/HToMlpe.jpg" target="_blank"><img src="https://i.imgur.com/HToMlpe.jpg" class="col-sm-4 col-xs-12" /></a>
  <a href="https://i.imgur.com/Fvj1nbg.jpg" target="_blank"><img src="https://i.imgur.com/Fvj1nbg.jpg" class="col-sm-4 col-xs-12" /></a>
  <a href="https://i.imgur.com/VUIQWmk.jpg" target="_blank"><img src="https://i.imgur.com/VUIQWmk.jpg" class="col-sm-4 col-xs-12" /></a>
  <a href="https://i.imgur.com/NHmCcdx.jpg" target="_blank"><img src="https://i.imgur.com/NHmCcdx.jpg" class="col-sm-4 col-xs-12" /></a>
  <a href="https://i.imgur.com/aKOmQde.jpg" target="_blank"><img src="https://i.imgur.com/aKOmQde.jpg" class="col-sm-4 col-xs-12" /></a>
  <a href="https://i.imgur.com/A0Yvsf7.jpg" target="_blank"><img src="https://i.imgur.com/A0Yvsf7.jpg" class="col-sm-4 col-xs-12" /></a>
</div>

<h3>Table of Contents</h3>

* TOC
{:toc}

### Buy

For fast shipping to the US, you can buy from our [Tindie](https://www.tindie.com/products/jasoncoon/trinket-pro-rgb-led-race-gate-controller/) store.

For free shipping worldwide, you can [contact us](/contact) to order and have them shipped to you directly from the PCB manufacturer.  It takes a few weeks, and they require PCBs be ordered in multiples of three.

### Details

This is a shield/breakout for [Adafruit Pro Trinket - 5V](https://www.adafruit.com/product/2000) that makes it easy to control addressable RGB LEDs, such as WS2811, WS2812 (Adafruit NeoPixels), SK6812, etc. The Adafruit Pro Trinket - 5V is an excellent Arduino compatible development board based on the ATmega328.

No level shifter is required since the Trinket Pro 5V outputs the same 5 volt logic level that the LEDs require.

I made this shield because I was hand-wiring this same layout on perma-proto boards, which was time-consuming and unprofessional looking.

One digital output pin (D4) is run through a data line resistor, as recommended by [Adafruit's NeoPixel Best Practices](https://learn.adafruit.com/adafruit-neopixel-uberguide/best-practices).

The large 5V trace and GND pour should be rated for up to 2 amps.  That's enough for about 33 LEDs at max output (solid white, full brightness).  For larger quantities, power should be connected directly to the LEDs, and/or brightness should be limited in software.

### Specifications

- Size: 0.93 x 1.73 x .063 inch (23.6 x 43.8 x 1.6 mm)
- 2 layer printed circuit board
- FR4 substrate
- Lead free
- Purple SMOBC (solder mask over bare copper)
- ENIG (Electroless Nickel Immersion Gold) finish
- Manufactured in the USA
- Current Rating: 2A

Parts that are **not included**, but are required to assemble:

- [Adafruit Pro Trinket - 5V 16MHz](https://www.adafruit.com/product/2000)
- [330 Ohm resistors](https://www.adafruit.com/product/2781)
- [Tactile Button switches (6mm)](https://www.adafruit.com/product/367)

Wire/Connectors

- [Pre-Wired JST SM Connectors](https://amzn.to/2P6qYEN)

OR

- [JST-SM connectors](https://amzn.to/2P7cvJ1)
- [SN-48B Crimping Tool](https://amzn.to/2P6YpHh)
- 22 AWG Wire

Optional parts:

- [3D printed case](https://www.thingiverse.com/thing:3200653)

Parts to build race gates:

- [WS2812B RGB LEDs - 4m 60/m IP30](https://www.aliexpress.com/item/1m-4m-5m-WS2812B-Smart-led-pixel-strip-Black-White-PCB-30-60-144-leds-m/2036819167.html)
- [3/4 in. x 10 ft. White PEX Pipe](https://www.homedepot.com/p/Apollo-3-4-in-x-10-ft-White-PEX-Pipe-APPW1034/301541221)
- [White floral foam](https://www.michaels.com/floracraft-styrofoam-block-white/M10102529.html)

Pipe fittings

- [3D printed 3/4 PEX fittings](https://www.thingiverse.com/thing:3200653)

OR

- [3/4 in. Plastic PEX Barb 90-Degree Elbow (5-Pack)](https://www.homedepot.com/p/Apollo-3-4-in-Plastic-PEX-Barb-90-Degree-Elbow-5-Pack-PXPAE345PK/301541108)
- [3/4 in. Plastic PEX Barb Tee (5-Pack)](https://www.homedepot.com/p/Apollo-3-4-in-Plastic-PEX-Barb-Tee-5-Pack-PXPAT345PK/301541249)

### Code

Open source example Arduino sketch: [https://github.com/jasoncoon/demoreel100-buttons](https://github.com/jasoncoon/demoreel100-buttons)

Features:

* Adjustable brightness/power
* Choose animation/pattern

### Electronics Assembly Instructions

**Note**: Double-check the position, alignment, and orientation of each component very carefully before soldering!

If you're new to soldering, I highly recommend reading through a good soldering tutorial, such as the ones by [Adafruit](https://learn.adafruit.com/adafruit-guide-excellent-soldering) and [SparkFun](https://learn.sparkfun.com/tutorials/how-to-solder-through-hole-soldering).

I used this [3D printed vise](https://www.thingiverse.com/thing:2801942) to hold the PCB while soldering.

I also built one of these [DIY flexible soldering helping hands](http://www.instructables.com/id/DIY-Flexible-Soldering-Helping-Hand/).

<img src="https://i.imgur.com/HkRdXLb.jpg" class="img-responsive" />

1. Insert the 300 Ohm to 500 Ohm resistor.

2. Flip the board over and solder each leg of the resistor.

3. Insert and solder the button pins.

4. Trim all the leads with a pair of wire cutters.  Flush diagonal cutters work best.

5. I used a pre-assembled [3 pin JST-SM connector](https://amzn.to/2CWBL1G) to connect the LEDs.

6. If possible, use a vise to hold the PCB vertically, and a helping hands tool to hold the wires as they're soldered.
<img src="https://i.imgur.com/26X166P.jpg" class="img-responsive" />

7. With a small amount of solder on the tip of the iron, heat the wire right on the bottom of the pad.

8. Melt a fair amount of solder on the wire and pad.  The insulation on the wire may start to melt as the wire heats up.  If so, push the wire through the hole, from the top towards the bottom, to ensure no wire is left exposed on top.

9. Repeat this process for the other wires.

10. I used the Trinket to hold the female headers correctly aligned while I soldered.
<img src="https://i.imgur.com/A0Yvsf7.jpg" class="img-responsive" />

### Gate Assembly Instructions

Each gate requires:

* [3/4" white PEX pipe/tubing](https://www.homedepot.com/p/Apollo-3-4-in-x-10-ft-White-PEX-Pipe-APPW1034/301541221)
  * See below for lengths
* Two 90 degree elbows
* Two tees
* Two flanges (feet)
* Two 1.5" sections of 3/4" white PEX pipe used as fitting couplers
* One meter of NeoPixels, 60 LEDs per meter
  * 16 LEDs in each horizontal
  * 12 LEDs in each vertical

I used sandpaper to remove the markings from the pipe before assembly.

I built one gate with 3/4" PEX [elbows](https://www.homedepot.com/p/Apollo-3-4-in-Plastic-PEX-Barb-90-Degree-Elbow-5-Pack-PXPAE345PK/301541108) and [tees](https://www.homedepot.com/p/Apollo-3-4-in-Plastic-PEX-Barb-Tee-5-Pack-PXPAT345PK/301541249) from the hardware store.  They only had them in black, and I didn't care for how they looked, so I decided to [design and 3D print them in white PLA](https://www.thingiverse.com/thing:3200653).  They also didn't have any flanges for feet.

The white PEX pipe is great at diffusing the light from the LEDs, but I realized it was still very irregular and the strip could move around inside the pipe.

<img src="https://i.imgur.com/TK1Mo66.jpg" class="img-responsive" />

So I cut thin strips of white floral craft styrofoam, one on the front and one on the back of each LED strip.  Then I slid the LEDs into the pipes.  They no longer moved, and they were much better centered inside the pipe.  The light was much more regular.

<img src="https://i.imgur.com/YtBD7k4.jpg" class="img-responsive" />

<img src="https://i.imgur.com/ojRlkRk.jpg" class="img-responsive" />

You might try using one thicker strip of foam on the front of the LEDs for even better diffusion, but then I don't think as much light would bounce around to the back.  I chose to point the LEDs towards the inside of the gate.

Ensure the input wires and JST-SM connector stick out one end, through a flange, coupler (short section of pipe), and tee.

All the pipe sections and fittings are just press fit together.  I did not use pipe glue.  If they're loose, you could use a bit of hot glue.

### Gate Sizes and Pipe Dimensions

**Small gate**

I built one small gate that did not require cutting or splicing the LED strip.  I just measured and cut the pipe, then slid the LEDs and styrofoam through the pipe and fittings.

- Two 10.75" horizontal pipe sections
- Two 7" vertical pipe sections
- Two 1.5" pipes used as fitting couplers

The two larger gates I built required cutting the 60 LED strip into four pieces:

- 16 LEDs in each horizontal section
- 12 LEDs in each vertical section

I carefully counted, measured, re-counted, and re-measured before marking and cutting the LED strips.  I then carefully measured, cut, arranged and soldered 22 AWG wires between the output of one 12 LED strip to the input of one 16 LED strip.  Repeat for the next strip of 12, then the final strip of 16 LEDs.

**Medium gate**

- Two 12.5" horizontal pipe sections
- Two 9.5" vertical pipe sections

I measured and cut the medium gate size so each LED strip would end right where the fittings started inside the pipe sections.

**Large gate**

- Two 15" horizontal pipe sections
- Two 10.5" vertical pipe sections

The large gate has some space between the LED strips and the end fittings, but I don't feel it made much of a difference visually.

**MultiGP Tiny Whoop Class 19"x19" gate**

- Four 19" pipe sections

This gate required 2 meters of LEDs, which fit nearly perfectly.

### Gate and Controller assembly

I designed and (3D printed a case for the Trinket Pro](https://www.thingiverse.com/thing:3200653).  I assembled the shield with female headers so the Trinket Pro could be removed, so the case is a bit bulky.  I plan to build more without the female headers, and will make a new lower profile case when I do.

I printed the case, lid, and two button pins.  The shield attaches to the case with small M3 screws.  The case can be attached to a flange/foot with M3 screws, by marking and drilling a small hole in the flange.  I'll likely end up combining the case and flange into one 3D printed part eventually.

I power each gate with a [cheap USB power bank](https://www.microcenter.com/product/488479/2600mah-power-bank---white).
